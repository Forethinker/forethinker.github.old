<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Forethinker</title>
    <meta name="description" content="">
    <meta name="author" content="forethinker">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://www.4thinker.com/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <link href="https://www.4thinker.com/theme/local.css" rel="stylesheet">
    <link href="https://www.4thinker.com/theme/pygments.css" rel="stylesheet">
    <link href="https://www.4thinker.com/theme/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Gudea:400,400italic|Alegreya+SC' rel='stylesheet' type='text/css'>
</head>

<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        "HTML-CSS": {
            styles: {
                ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
            },
            tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
            });
            MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
                var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
                VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
                VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
                VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
                VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
                });
                MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
                    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
                    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
                    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
                    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
                    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
                    });
                </script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>

<body>
<header class="blog-header">
  <div class="container">
    <div class="row-fluid" styel="height: 0px;">
    	<a href="https://www.4thinker.com" class="brand">Forethinker</a>


        <ul class="nav nav-pills pull-right" style="height: 16px; margin-top: 9px;">
 
               <form action="http://google.com/search" method="get"> 
                   <fieldset role="search"> 
                       <input type="hidden" name="q" value="site:https://www.4thinker.com" />
                       <input class="search" type="text" name="q" results="0" value="search" onfocus="if (this.value=='search') this.value = ''" type="text" type="text" maxlength="80" size="28"/> 
                   </fieldset>
               </form>
        </ul>

        <ul class="nav nav-pills pull-right" style="margin-top: 7px;">
            <li >
              <a href="https://www.4thinker.com/category/algs.html ">algs</a>
            <li >
              <a href="https://www.4thinker.com/category/cs.html ">cs</a>
            <li >
              <a href="https://www.4thinker.com/category/dev.html ">dev</a>
            <li >
              <a href="https://www.4thinker.com/category/hack.html ">hack</a>
            <li >
              <a href="https://www.4thinker.com/category/life.html ">life</a>
            <li >
              <a href="https://www.4thinker.com/category/sysadmin.html ">sysadmin</a>
            <li >
              <a href="https://www.4thinker.com/category/web.html ">web</a>

        </ul>

    </div> <!-- End of fluid row-->
  </div>   <!-- End of Container-->
</header>
    
<div class="container">
    <div class="content">
    <div class="row-fluid">

        <div class="span12">
        

        

    <div class='row-fluid''>
        <div class="article-title span12">
            <a href="https://www.4thinker.com/LAMP-on-cygwin.html"><h1>Installing LAMP on Cygwin</h1></a>
        </div>
    </div>
    <div class="row-fluid">
      <div class="span2">
<div class="article-sidebar">

<span>May 29, 2013 </span>

<span>
[ <a href="https://www.4thinker.com/category/hack.html">hack</a> ]
</span>

<span>
 
<a href="https://www.4thinker.com/tag/cygwin.html">#cygwin</a>, <a href="https://www.4thinker.com/tag/php.html">#php</a>, <a href="https://www.4thinker.com/tag/mysql.html">#mysql</a>, <a href="https://www.4thinker.com/tag/apache.html">#apache</a>, <a href="https://www.4thinker.com/tag/ssh.html">#ssh</a></span>

  <span>Read in 3 min.</span>

    <span id="post-share-links">
        <a href="http://twitter.com/home?status=Installing%20LAMP%20on%20Cygwin%20 https%3A//www.4thinker.com/LAMP-on-cygwin.html" target="_blank" title="Share on Twitter"><i class="icon-large icon-twitter-sign"></i></a> 
        <a href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A//www.4thinker.com/LAMP-on-cygwin.html&p[images][0]=&p[title]=Installing%20LAMP%20on%20Cygwin%20&p[summary]=%3Cp%3EInstalling%20LAMP%20on%20cygwin%20can%20be%20handy%20if%20you%20want%20to%20just%20test%20a%20quick%20web%20service%20on%20your%20machine.%3C/p%3E%0A%3Cp%3EDownload%20the%20%3Ca%20href%3D%22http%3A//cygwin.com/setup.exe%22%3Esetup.exe%3C/a%3E%20and%20install%20it%20along%20with%20wget.%20We%20will%20be%20using%20%3Ccode%3Eapt-cyg%3C/code%3E%2C%20which%20is%20similar%20to%20%3Ccode%3Eapt-get%3C/code%3E%20in%20Debian-based%20linux%20distros.%20It%20allows%20you%20to%20specify%20the%20packages%20you%20want%20to%20install%20right%20on%20the%20terminal%3A%3C/p%3E%0A%3Cdiv%20class%3D%22highlight%22%3E%3Cpre%3E%3Cspan%3E%3C/span%3Ewget%20http%3A//apt-cyg.googlecode.com/svn/trunk/apt-cyg%0Aif%20%5B%20%24%28uname%20-m%29%20%3D%3D%20%26%2339%3Bi686%26%2339%3B%20%5D%3B%20then%20arch%3D%26quot%3Bx86%26quot%3B%3B%20else%20arch%3D%26quot%3Bx86_64%26quot%3B%3B%20fi%3B%20sed%20-i%20%26quot%3Bs/%5C%28wget%20-N%20%5C%24mirror%5C%29%5C%28%5C/setup%5C..%2A%5C%29/%5C1%5C/%24arch%5C2/%26quot%3B%20/usr/local/bin/apt-cyg%0Achmod%20%2Bx%20apt-cyg%0Amv%20apt-cyg%20/usr/local/bin%20%E2%80%A6%3C/pre%3E%3C/div%3E" target="_blank" title="Share on Facebook"><i class="icon-large icon-facebook-sign"></i></a> 
        <a href="https://plus.google.com/share?url=https%3A//www.4thinker.com/LAMP-on-cygwin.html" target="_blank" title="Share on Google Plus"><i class="icon-large icon-google-plus-sign"></i></a> 
        <!--<a href="" target="_blank" title="Share on Linkedin"><i class="icon-large icon-linkedin-alt"></i></a>-->
        <a href="mailto:?subject=Installing%20LAMP%20on%20Cygwin%20&body=https%3A//www.4thinker.com/LAMP-on-cygwin.html" target="_blank" title="Share via Email"><i class="icon-large icon-envelope-sign"></i></a>
    </span>

</div>      </div>
      <div class="article-content span10">
	<p>Installing LAMP on cygwin can be handy if you want to just test a quick web service on your machine.</p>
<p>Download the <a href="http://cygwin.com/setup.exe">setup.exe</a> and install it along with wget. We will be using <code>apt-cyg</code>, which is similar to <code>apt-get</code> in Debian-based linux distros. It allows you to specify the packages you want to install right on the terminal:</p>
<div class="highlight"><pre><span></span>wget http://apt-cyg.googlecode.com/svn/trunk/apt-cyg
if [ $(uname -m) == &#39;i686&#39; ]; then arch=&quot;x86&quot;; else arch=&quot;x86_64&quot;; fi; sed -i &quot;s/\(wget -N \$mirror\)\(\/setup\..*\)/\1\/$arch\2/&quot; /usr/local/bin/apt-cyg
chmod +x apt-cyg
mv apt-cyg /usr/local/bin/
apt-cyg install ctags curl gcc-g++ make mintty mysql mysqld openssl screen tar vim wget which
apt-cyg -m ftp://ftp.cygwinports.org/pub/cygwinports/ install php apache2-mod_php5 php-mysql php-mysqli php-PEAR
echo &quot;ftp://mirrors.kernel.org/sources.redhat.com/cygwin/&quot; &gt; /etc/last-mirror
</pre></div>


<p>The line that starts with <code>if</code> is to <a href="http://code.google.com/p/apt-cyg/issues/detail?id=26">fix the bug</a> introduced by Cygwin distinguishing x86 and x64 in their setup.ini file. I wrote the script so that it does not accidentally make wrong changes in the future.</p>
<p>Using <code>-m</code> could break your <code>apt-cyg</code> from working in the future, because <code>apt-cyg</code> reads from <code>/etc/setup/last-mirror</code> to fetch <code>setup.ini</code> (a file that includes lists of files that the server has). "ftp://mirrors.kernel.org" is the most popular source repository, and it is fastest one for me.</p>
<p>Now setting up the cygserver, sshd, and httpd2 (apache)</p>
<div class="highlight"><pre><span></span>cygserver-config
cygrunsrv -S cygserver
# select default answer for all
ssh-host-config
cygrunsrv -S sshd
httpd2-config
# check the services running on services.msc
# test apache by opening `localhost` on a browser
</pre></div>


<p>Apache2 did not work for me right away. I had to make some modifications:</p>
<div class="highlight"><pre><span></span># on c:/cygwin/etc/apache2/httpd.conf Switch from
# LoadModule php5_module    modules/libphp5.so
# LoadModule php5_module    lib/apache2/cygphp5.so
sed -i &#39;s/\(\s*\)[^#]\(LoadModule php5_module\s*\)\(modules\/libphp5.so\)/\1#\2\3\n\1\2lib\/apache2\/cygphp5.so/&#39; /cygdrive/c/cygwin/etc/apache2/httpd.conf 
# switching from
# AllowOverride None
# AllowOverride All
sed -i &#39;s/\(\s*\)[^#]\(AllowOverride\s*\)\(.*\)/\1#\2\3\n\1\2All/&#39; /cygdrive/c/cygwin/etc/apache2/httpd.conf
</pre></div>


<p>Once again that <code>sed</code> will not make changes if your configuration file happens to be different from mine. It also comments the previous settings instead of deleting it so that you can revert the changes in the file later should things still do not work out.</p>
<p>Testing PHP</p>
<div class="highlight"><pre><span></span><span class="err">#</span> <span class="nx">test</span> <span class="nx">php</span> <span class="nx">by</span> <span class="nx">saving</span> <span class="sb">`</span><span class="cp">&lt;?php</span> <span class="nb">phpinfo</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="sb">`</span> <span class="nx">on</span> <span class="nx">C</span><span class="o">:</span><span class="err">\</span><span class="nx">cygwin</span><span class="err">\</span><span class="nx">srv</span><span class="err">\</span><span class="nx">www</span><span class="err">\</span><span class="nx">htdocs</span><span class="err">\</span><span class="nx">test</span><span class="p">.</span><span class="nx">php</span>
<span class="nx">echo</span> <span class="s2">&quot;</span><span class="cp">&lt;?php</span> <span class="nb">phpinfo</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="s2">&quot;</span> <span class="o">&gt;</span> <span class="err">/cygdrive/c/cygwin/srv/www/htdocs/test.php</span>
<span class="err">#</span> <span class="nx">and</span> <span class="nx">opening</span> <span class="nx">http</span><span class="o">:</span><span class="c1">//localhost/test.php on your web browser</span>
</pre></div>


<p>Setting Up MySQL</p>
<div class="highlight"><pre><span></span># create database &quot;test&quot; and user &quot;root&quot;
mysql_install_db
# 
mysql_secure_installation
# change the password
# mysqladmin -u root password &quot;old-password&quot; &quot;new-password&quot;
# run the server
/usr/bin/mysqld_safe &amp;
</pre></div>


<p>The services you have installed on the first step cannot be killed from your Windows Task Manager or services.msc page, because <code>cygrunsrv</code> respawns them again. You have to use <code>-E</code> flag of <code>cygrunsrv</code>. <code>cygrunsrv</code>also has the following flags:</p>
<div class="highlight"><pre><span></span>-S start
-E stop
-R remove
-I install [Name] -p [path] -a [&quot;-args&quot;] -u [user] -w [password]
</pre></div>


<p>Just beware of the fact that httpd2.exe is known to have a problem where its parent process exists, leaving child processes as zombies. Windows have a problem cleaning them up. (See the General Notes) <a href="http://web.mit.edu/cygwin/cygwin_v1.3.2/usr/doc/Cygwin/cygrunsrv.README">5</a></p> 
	<a class="btn btn-mini xsmall" href="https://www.4thinker.com/LAMP-on-cygwin.html">
          <i class="icon-comment"></i> Comment </a>
	<hr />
      </div>
      
    </div>
    
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="https://www.4thinker.com/tag/ssh.html">1</a></li>

    <li class="next disabled"><a href="#">&rarr; Next</a></li>

</ul>
</div>
 
  
        </div>
        
        
    </div>     </div> </div>

<!--footer-->
<div class="container">
  <div class="well" style="background-color: #E9EFF6">
    <div id="blog-footer">
      <div class="row-fluid">
	<div class="social span4" align="center" id="socialist">
	  <ul class="nav nav-list">
	    <li class="nav-header">
	      Social
	    </li>
	    <li><a href="http://stackoverflow.com/users/986067/forethinker"><i class="icon-Stackoverflow" style="color: #1f334b"></i>Stackoverflow</a></li>
	    <li><a href="http://github.com/forethinker"><i class="icon-Github" style="color: #1f334b"></i>Github</a></li>
            <li>
            <a href="mailto:help4thinker@gmail.com"><i class="icon-envelope" style="color: #1f334b" ></i> E-mail</a>
            </li>
            <li>
            <a href="http://www.4thinker.com/pages/aboutme.html"><i class="icon-thumbs-up" style="color: #1f334b" ></i> Me</a>
            </li>
            <li>
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
              <input type="hidden" name="cmd" value="_s-xclick">
              <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHJwYJKoZIhvcNAQcEoIIHGDCCBxQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYAn8m2t0rNgqrECQ0Ud0UKB6eo2OCzD1zyREArewWZuBTSdLyuJzRUkOBkZs6dBGE1AzzofibC3SPr6TtY79qQVPiref0fxL3q6z30ZorivEpfTrmAgQKxuprDVJ4YFecAuzp9DPUk10oScmei3EZv97oq7P+jSFFvJ/K86dP4CpDELMAkGBSsOAwIaBQAwgaQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQI3EUyiIvExciAgYBoiT7A1b73V0Gv8I0njdxrbBIMID/qIyiqhxnxrib3O1QStQENd39kFnxKRR93vmjWS54RH2HFUZVhZeIqJ7CUJmKtLJzUBeOioJNPM4li5J1aO/ki4QQLPCxEey4rUl2/EaQlYJaJaXb/akzTtIYeyEd49ZQnxCeisNzOAP6Nu6CCA4cwggODMIIC7KADAgECAgEAMA0GCSqGSIb3DQEBBQUAMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTAeFw0wNDAyMTMxMDEzMTVaFw0zNTAyMTMxMDEzMTVaMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAwUdO3fxEzEtcnI7ZKZL412XvZPugoni7i7D7prCe0AtaHTc97CYgm7NsAtJyxNLixmhLV8pyIEaiHXWAh8fPKW+R017+EmXrr9EaquPmsVvTywAAE1PMNOKqo2kl4Gxiz9zZqIajOm1fZGWcGS0f5JQ2kBqNbvbg2/Za+GJ/qwUCAwEAAaOB7jCB6zAdBgNVHQ4EFgQUlp98u8ZvF71ZP1LXChvsENZklGswgbsGA1UdIwSBszCBsIAUlp98u8ZvF71ZP1LXChvsENZklGuhgZSkgZEwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAgV86VpqAWuXvX6Oro4qJ1tYVIT5DgWpE692Ag422H7yRIr/9j/iKG4Thia/Oflx4TdL+IFJBAyPK9v6zZNZtBgPBynXb048hsP16l2vi0k5Q2JKiPDsEfBhGI+HnxLXEaUWAcVfCsQFvd2A1sxRr67ip5y2wwBelUecP3AjJ+YcxggGaMIIBlgIBATCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwCQYFKw4DAhoFAKBdMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTE0MDcyMTA4NDMyMVowIwYJKoZIhvcNAQkEMRYEFPjXDRlI/ZBCCXrgNnKWbuk7Pu21MA0GCSqGSIb3DQEBAQUABIGAQ8rt33qN52B9iXzNFsn9sBto4e9iObuwZjMa+fTguCM+Z29Zp2sl7PEE0Eg7xv8gROt9+G2xu8LYwFeZ/TXJlLLGb2qFzgYRIkKP3Qye6ITBOb/0GIbmReKAl7Wavo2sy+4yVObksNS8CiiOi6QHSjXNnGPjFc7GwrLrMLgHsdo=-----END PKCS7-----
              ">
              <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
              <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form>
            </li>

	  </ul>
	</div>
        <div class="links span4" align="center">
          <ul class="nav nav-list">
            <li class="nav-header"> 
              Links
            </li>
            
            <li><a href="http://mbsy.co/7sh6q">Codeschool </a></li>
            <li><a href="http://coursera.org/">Cousera </a></li>
            <li><a href="http://howtogeek.com/">How to Geek</a></li>
            <li><a href="http://lifehacker.com/">Lifehacker</a></li>
            <li><a href="http://thegeekstuff.com/">The Geek Stuff</a></li>
            <li><a href="http://vimcasts.org/">Vim Casts</a></li>
          </ul>
        </div>
	<div class="site-nav span4" align="center">
          <ul class="nav nav-list" id="site-links">
            <li class="nav-header"> 
              Site
            </li>
            <li><a href="https://www.4thinker.com"><i class="icon-home" style="color: #1f334b">
                </i>Home</a></li>
            <li><a href="https://www.4thinker.com/archives.html"><i class="icon-list" style="color: #1f334b">
                </i>Archives</a></li>
	    <li><a href="https://www.4thinker.com/tags.html"><i class="icon-tags" style="color: #1f334b">
                </i>Tags</a></li>
	    
	    <li> <a href="https://www.4thinker.com/feeds/all.rss.xml" rel="alternate">
                <i class="icon-rss" style="color: #1f334b"></i>
                RSS Feed</a></li>
            <li><a href="https://www.4thinker.com/feeds/all.atom.xml" rel="alternate">
                <i class="icon-rss-sign" style="color: #1f334b"></i>
                Atom Feed</a></li>
	  </ul>

        </div>

      </div> <!--end of fluid row-->
    </div> <!--end of blog-footer-->
    <hr />
    <p style="text-align: center; margin: 0.1em;"><a href="https://www.4thinker.com">Forethinker</a>
    &copy; <a href="pages/aboutme.html">forethinker</a>

    <div class="pull-right" style="font-size: 8px">
    Powered by <a href="http://github.com/getpelican/pelican">Pelican</a> and
    <a href="https://twitter.github.com/bootstrap">Twitter Bootstrap</a> with <a href="https://github.com/theanalyst/built-texts">built-texts theme</a>. 
    </div>
  </div> <!--end of well -->
</div> <!--end of container -->

<!--/footer-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>

<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-wip/js/bootstrap.min.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53043426-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

</body>
</html>